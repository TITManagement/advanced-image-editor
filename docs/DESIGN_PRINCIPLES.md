# 設計指針 - Design Principles

## コード修正時の基本方針

### 1. 安全第一の原則
- **動作しているコードには慎重にアプローチする**
- 「修正前は動いていた」という情報は最優先の手がかり
- 既存機能を壊さないことが最重要

### 2. KISS原則の徹底
- **Keep It Simple, Stupid**
- 複雑な解決策を提案する前に、シンプルな原因を探す
- オーバーエンジニアリングを避ける
- ユーザーが「複雑すぎる」と指摘したら、即座にシンプルな方法を探す

### 3. 理解ファーストアプローチ
- 修正前に既存コードの動作を完全に理解する
- 各コンポーネントの特性と役割を把握する
- 一律の解決策を適用しない

### 4. 最小変更の原則
- 問題解決に必要な最小限の変更のみを行う
- 影響範囲を最小化する
- 段階的な修正を心がける

## プラグイン別の特性理解

### basic_plugin / density_plugin
- リアルタイム処理が基本
- スライダー変更時に即座に画像更新
- チャタリング対策が有効

### filters_plugin
- 既存の画像処理パイプラインを使用
- apply_all_adjustments経由で処理
- 独自の処理フローを持つ

## 修正時のチェックリスト

### 修正前
- [ ] 既存コードの動作を理解したか？
- [ ] 問題の根本原因を特定したか？
- [ ] 最もシンプルな解決策を検討したか？

### 修正中
- [ ] 最小限の変更になっているか？
- [ ] 既存機能に影響しないか？
- [ ] コンポーネントの特性を考慮しているか？

### 修正後
- [ ] 元の機能が正常に動作するか？
- [ ] 新しい問題を生んでいないか？
- [ ] ユーザーの要求を満たしているか？

## ユーザーフィードバックの重要性

- ユーザーの「違う気がする」という直感を信頼する
- 「動いていた」という過去の状態を重視する
- 複雑な提案に対する否定的反応は警告信号

## 学習と改善

この指針は実際の開発経験から生まれたものです。
今後も同様の経験を通じて継続的に更新していきます。

---
最終更新: 2025年10月5日